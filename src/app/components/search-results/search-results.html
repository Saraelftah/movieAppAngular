
<div class="container !p-5">
   @let query = currentSearchQuery();
  @if (query) {
    <h2 class="text-2xl font-bold !mb-5">Search Results for "{{ query ?? ''}}"</h2>
  } @else {
    <h2 class="text-2xl font-bold !mb-5">Search Results</h2>
  }

  @if (searchResults().length > 0) {
    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6 justify-items-center">

      @for (movie of searchResults(); track movie.id) {
        <p-card [header]="movie.title"
                [style]="{ width: '100%', 'max-width': '250px', 'margin-bottom': '1rem'}"
                styleClass="p-card-shadow">

          <ng-template pTemplate="header">
            <a [routerLink]="['/moviedetails', movie.id]">
              <img [src]="'https://image.tmdb.org/t/p/w300' + movie.poster_path" [alt]="movie.title"
                   class="w-full h-auto rounded-t-lg object-cover"
                   onerror="this.onerror=null; this.src='https://placehold.co/300x450/cccccc/333333?text=No+Image';" />
            </a>
          </ng-template>

          <ng-template pTemplate="content">
            <p class="text-sm text-gray-700 line-clamp-3 !mb-4">{{ movie.overview }}</p>
          </ng-template>

          <ng-template pTemplate="footer">
            <div class="flex flex-col gap-2">

               <div class="flex align-items-center gap-2">
                        <p-rating [ngModel]="movie.vote_average / 2" [readonly]="true" [stars]="5"></p-rating>
                </div>

              <p-button [routerLink]="['/moviedetails', movie.id]" label="Details" icon="pi pi-info-circle" styleClass="p-button-sm p-button-outlined"></p-button>

            </div>
          </ng-template>

        </p-card>
      }
    </div>
  } @else {
    <p class="text-lg text-gray-600">No movies found matching your search.</p>
  }
</div>