import{a as P}from"./chunk-SHE2DRW5.js";import{a as F,b as k,c as B,d as j,e as z,f as A,g as G}from"./chunk-RWWXTS7J.js";import"./chunk-WCM4IZ3U.js";import{e as O,f as N,g as T}from"./chunk-LFVORJ4Q.js";import{aa as I}from"./chunk-CQ6BDENV.js";import{h as D,i as R,p as E}from"./chunk-VVZGUZE2.js";import{$a as x,Aa as r,Bb as a,Cb as v,Db as s,La as u,Rb as y,Sb as b,W as l,Yb as p,Zb as w,ab as M,bb as _,cb as S,db as h,eb as d,fb as o,gb as n,hb as m,pb as C,ya as g}from"./chunk-OVEDPWQS.js";function $(t,i){if(t&1&&m(0,"p-tag",13),t&2){let e=i.$implicit;d("value",e)}}function q(t,i){t&1&&(o(0,"p"),a(1,"No genres available."),n())}function H(t,i){if(t&1&&(o(0,"div",3),m(1,"img",4),n(),o(2,"div",5)(3,"h2",6),a(4),n(),o(5,"p",7),a(6),m(7,"i",8),n(),o(8,"div",9),m(9,"p-rating",10),o(10,"span"),a(11),y(12,"number"),n()(),o(13,"p",11),a(14),n(),o(15,"div",12),S(16,$,1,1,"p-tag",13,_,!1,q,2,0,"p"),n()()),t&2){let e=C();r(),d("src","https://image.tmdb.org/t/p/w500"+e.movie().poster_path,g)("alt",e.movie().title),r(3),v(e.movie().title),r(2),s("",e.movie().release_date," "),r(3),d("ngModel",e.movie().vote_average/2)("readonly",!0)("stars",5),r(2),s("(",b(12,10,e.movie().vote_average,"1.1-1"),"/10)"),r(3),v(e.movie().overview),r(2),h(e.genres())}}function J(t,i){t&1&&(o(0,"p"),a(1,"Loading movie details or movie not found..."),n())}var U=class t{movie;id;genres;route=l(E);movieService=l(P);recommService=l(j);movieReviwService=l(A);constructor(){this.movieService.loadAllSections(),this.movieService.fetchGenres(),this.movie=p(()=>this.movieService.findMovieById(this.id)),this.genres=p(()=>{let i=this.movie(),e=this.movieService.genre();return!i||!i.genre_ids||e.length===0?[]:i.genre_ids.map(c=>{let f=e.find(L=>L.id===c);return f?f.name:"Unknown"})}),w(()=>{let i=this.movie();i&&i.id?(this.recommService.fetchRecomm(i.id,"movie"),this.movieReviwService.fetchReviw(i.id),console.log("Fetching recommendations for movie ID:",i.id)):console.log("Movie not yet found or ID not available, not fetching recommendations.")})}ngOnInit(){this.id=Number(this.route.snapshot.paramMap.get("id"))}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=u({type:t,selectors:[["app-moviedetails"]],decls:7,vars:1,consts:[[1,"movieDetails"],[1,"container"],[1,"flex","flex-col","lg:flex-row","justify-between","gap-4"],[1,"img-container","rounded-lg"],[1,"rounded-3xl",3,"src","alt"],[1,"movie-details","w-full","lg:w-3/5","mt-4","lg:mt-0"],[1,"!mb-4","text-3xl","font-bold"],[1,"!mb-4","rel-date"],[1,"pi","pi-calendar",2,"font-size","1rem"],[1,"flex","align-items-center","gap-2","myRating"],[3,"ngModel","readonly","stars"],[1,"!my-4"],[1,"genres-container","flex","flex-wrap","gap-2"],[1,"!mt-4","!rounded-full","genre",3,"value"]],template:function(e,c){e&1&&(o(0,"section",0)(1,"div",1)(2,"div",2),x(3,H,19,13)(4,J,2,0,"p"),n(),m(5,"app-recommendation")(6,"app-movie-reviw"),n()()),e&2&&(r(3),M(c.movie()?3:4))},dependencies:[R,D,I,F,B,k,T,O,N,z,G],styles:[".movie-details[_ngcontent-%COMP%]{background-color:#f3f1f1;padding:30px 20px;border-radius:24px;box-shadow:0 0 15px 5px #fff5b499;color:#272d37}.movie-details[_ngcontent-%COMP%]   .myRating[_ngcontent-%COMP%]{--p-rating-icon-active-color: gold}.movie-details[_ngcontent-%COMP%]   .rel-date[_ngcontent-%COMP%]{color:#5f6d7e}.movie-details[_ngcontent-%COMP%]   .genre[_ngcontent-%COMP%]{background-color:#ffe353;color:#272d37;padding:8px 16px}"]})};export{U as MovieDetails};
